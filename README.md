# LiveChat - Notification Server

<div align="center">

![Kotlin](https://img.shields.io/badge/Kotlin-1.9.21-blue?logo=kotlin)
![Ktor](https://img.shields.io/badge/Ktor-2.3.6-important)

</div>

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ **Kotlin** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ **Ktor**, –≤—ã—Å—Ç—É–ø–∞—é—â–∏–π –≤ —Ä–æ–ª–∏ —à–ª—é–∑–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Firebase Cloud Messaging (FCM) –¥–ª—è Android-–∫–ª–∏–µ–Ω—Ç–∞ LiveChat.

## üöÄ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π REST API, –∫–æ—Ç–æ—Ä—ã–π Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π. –û–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç –∫–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ—Å—Ä–µ–¥–Ω–∏–∫ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–∏—Å–æ–º FCM, —Ö—Ä–∞–Ω—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Firebase –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **–Ø–∑—ã–∫:** [Kotlin](https://kotlinlang.org/)
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫:** [Ktor](https://ktor.io/)
*   **–ê–¥–º–∏–Ω SDK:** [Firebase Admin SDK](https://firebase.google.com/docs/admin/setup)
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** [SLF4J](http://www.slf4j.org/) + [Logback](https://logback.qos.ch/)

## üì° API Endpoints

*   `POST /send`
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –ø–æ –µ–≥–æ FCM-—Ç–æ–∫–µ–Ω—É.
    *   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**
      ```json
      {
        "to": "fcm_token_here",
        "notification": {
          "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
          "body": "–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
        },
        "data": {
          "chatId": "12345",
          "anyOtherData": "value"
        }
      }
      ```

*   `POST /broadcast`
    *   **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** (–ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –±—É–¥—É—â–µ–µ) –†–∞—Å—Å—ã–ª–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ —Ç–æ–ø–∏–∫—É.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [JDK 17](https://adoptium.net/) –∏–ª–∏ –≤—ã—à–µ.
*   –ê–∫–∫–∞—É–Ω—Ç –≤ [Firebase](https://console.firebase.google.com/).

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/OneBasten/livechat-server.git
    cd livechat-server
    ```

2.  **–ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Firebase:**
    *   –í –∫–æ–Ω—Å–æ–ª–∏ Firebase –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí ¬´–£—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å–ª—É–∂–±¬ª.
    *   –ù–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á¬ª –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ **Node.js**.
    *   –°–∫–∞—á–∞–Ω–Ω—ã–π JSON-—Ñ–∞–π–ª –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `service_account_key.json`.

3.  **–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∫–ª—é—á –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
    *   –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `service_account_key.json` –≤ –ø–∞–ø–∫—É `resources/` –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
    *   *–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`!*

### 3. –ó–∞–ø—É—Å–∫

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
```bash
./gradlew run
